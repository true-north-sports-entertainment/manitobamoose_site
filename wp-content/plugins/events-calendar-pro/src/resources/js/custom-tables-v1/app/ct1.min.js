var tribe="object"==typeof tribe?tribe:{};tribe["custom-tables-v1"]=tribe["custom-tables-v1"]||{},tribe["custom-tables-v1"].ct1=function(e){function t(t){for(var n,i,s=t[0],l=t[1],a=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);p.length;)p.shift()();return c.push.apply(c,a||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,s=1;s<r.length;s++){var l=r[s];0!==o[l]&&(n=!1)}n&&(c.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={0:0},c=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var a=0;a<s.length;a++)t(s[a]);var u=l;return c.push(["NFBX",1]),r()}({"13aI":function(e,t){e.exports=tribe["events-pro"].data.blocks.recurring.actions},"644Q":function(e,t,r){},"6OzC":function(e,t){e.exports=lodash.find},"6Ugf":function(e,t){e.exports=tribe.common.elements},"8N8N":function(e,t){e.exports=tribe["events-pro"].elements},"9lL/":function(e,t){e.exports=tribe.common.data.plugins},B8vQ:function(e,t){e.exports=tribe.common.utils},GE2E:function(e,t){e.exports=tribe.common.icons},HJt2:function(e,t){e.exports=tribe.events.data.blocks.datetime},Ixdi:function(e,t,r){},JXX8:function(e,t){e.exports=tribe["events-pro"].data.blocks.recurring},K2gz:function(e,t){e.exports=tribe.modules.classnames},MWqi:function(e,t){e.exports=tribe.modules.reselect},"MXy+":function(e,t){e.exports=tribe.events.data.blocks.datetime.reducer},NFBX:function(e,t,r){"use strict";r.r(t),r.d(t,"blocks",(function(){return _})),r.d(t,"data",(function(){return O})),r.d(t,"dialog",(function(){return v})),r.d(t,"elements",(function(){return g})),r.d(t,"plugins",(function(){return T})),r.d(t,"occurrenceRedirect",(function(){return m})),r.d(t,"seriesMetabox",(function(){return S}));var n={};r.r(n),r.d(n,"TEC_EVENTS_PRO_PLUGIN",(function(){return w}));var o={};r.r(o),r.d(o,"ADD_EXCEPTION_RULE",(function(){return U})),r.d(o,"REMOVE_EXCEPTION_RULE",(function(){return F})),r.d(o,"EDIT_EXCEPTION_RULE",(function(){return H}));var c={};r.r(c),r.d(c,"addExceptionRule",(function(){return B})),r.d(c,"removeExceptionRule",(function(){return V})),r.d(c,"editExceptionRule",(function(){return G}));var i={};r.r(i),r.d(i,"DAY_LABEL",(function(){return J})),r.d(i,"WEEK_LABEL",(function(){return z})),r.d(i,"MONTH_LABEL",(function(){return Q})),r.d(i,"YEAR_LABEL",(function(){return Z})),r.d(i,"DAY_LABEL_PLURAL",(function(){return ee})),r.d(i,"WEEK_LABEL_PLURAL",(function(){return te})),r.d(i,"MONTH_LABEL_PLURAL",(function(){return re})),r.d(i,"YEAR_LABEL_PLURAL",(function(){return ne})),r.d(i,"SINGLE_LABEL",(function(){return oe})),r.d(i,"DAILY_LABEL",(function(){return ce})),r.d(i,"WEEKLY_LABEL",(function(){return ie})),r.d(i,"MONTHLY_LABEL",(function(){return se})),r.d(i,"YEARLY_LABEL",(function(){return le})),r.d(i,"WEEKLY_CUSTOM_LABEL",(function(){return ae})),r.d(i,"MONTHLY_CUSTOM_LABEL",(function(){return ue})),r.d(i,"YEARLY_CUSTOM_LABEL",(function(){return de})),r.d(i,"WEEKLY_CUSTOM_TYPE_ID",(function(){return pe})),r.d(i,"MONTHLY_CUSTOM_TYPE_ID",(function(){return be})),r.d(i,"YEARLY_CUSTOM_TYPE_ID",(function(){return ye})),r.d(i,"KEY_IS_OFF_START",(function(){return fe}));var s={};r.r(s),r.d(s,"WEEKLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION",(function(){return Ee})),r.d(s,"MONTHLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION",(function(){return Oe})),r.d(s,"YEARLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION",(function(){return _e})),r.d(s,"EXCEPTION_RULE_TYPES_OPTIONS",(function(){return ve})),r.d(s,"CUSTOM_EXCEPTION_RULE_TYPES_OPTIONS",(function(){return ge}));var l={};r.r(l),r.d(l,"getIndex",(function(){return me})),r.d(l,"getAllExceptionRules",(function(){return Te})),r.d(l,"getExceptionRule",(function(){return Se})),r.d(l,"getExceptionRuleTypes",(function(){return ke})),r.d(l,"getIsOffStart",(function(){return Re})),r.d(l,"getOffStartIndex",(function(){return Pe})),r.d(l,"getTypeId",(function(){return he})),r.d(l,"getTypeOption",(function(){return je})),r.d(l,"isRuleTypeCustom",(function(){return we}));var a={};r.r(a),r.d(a,"types",(function(){return o})),r.d(a,"actions",(function(){return c})),r.d(a,"selectors",(function(){return l})),r.d(a,"options",(function(){return s})),r.d(a,"sagas",(function(){return Ie})),r.d(a,"default",(function(){return Ye})),r.d(a,"setInitialState",(function(){return Ae}));var u={};r.r(u),r.d(u,"ADD_RECURRENCE_RULE",(function(){return Ue})),r.d(u,"REMOVE_RECURRENCE_RULE",(function(){return Fe})),r.d(u,"EDIT_RECURRENCE_RULE",(function(){return He}));var d={};r.r(d),r.d(d,"addRecurrenceRule",(function(){return Be})),r.d(d,"removeRecurrenceRule",(function(){return Ve})),r.d(d,"editRecurrenceRule",(function(){return Ge}));var p={};r.r(p),r.d(p,"WEEKLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION",(function(){return Ke})),r.d(p,"MONTHLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION",(function(){return $e})),r.d(p,"YEARLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION",(function(){return Xe})),r.d(p,"RECURRENCE_RULE_TYPES_OPTIONS",(function(){return qe})),r.d(p,"CUSTOM_RECURRENCE_RULE_TYPES_OPTIONS",(function(){return Je}));var b={};r.r(b),r.d(b,"getIndex",(function(){return ze})),r.d(b,"getAllRecurrenceRules",(function(){return Qe})),r.d(b,"getRecurrenceRule",(function(){return Ze})),r.d(b,"getRecurrenceRuleTypes",(function(){return et})),r.d(b,"getIsOffStart",(function(){return tt})),r.d(b,"getOffStartIndex",(function(){return rt})),r.d(b,"getTypeId",(function(){return nt})),r.d(b,"getTypeOption",(function(){return ot})),r.d(b,"isRuleTypeCustom",(function(){return ct}));var y={};r.r(y),r.d(y,"types",(function(){return u})),r.d(y,"actions",(function(){return d})),r.d(y,"selectors",(function(){return b})),r.d(y,"options",(function(){return p})),r.d(y,"sagas",(function(){return yt})),r.d(y,"default",(function(){return Ot})),r.d(y,"setInitialState",(function(){return Et}));var f={};r.r(f),r.d(f,"getTickets",(function(){return _t})),r.d(f,"isEventTicketsActive",(function(){return vt})),r.d(f,"hasRSVP",(function(){return gt})),r.d(f,"hasTickets",(function(){return mt}));var E={};r.r(E),r.d(E,"getShared",(function(){return Rt})),r.d(E,"getDayOfMonthOptions",(function(){return Pt}));var O={};r.r(O),r.d(O,"initStore",(function(){return Kr})),r.d(O,"getStore",(function(){return $r}));var _={};r.r(_);var v={};r.r(v);var g={};r.r(g),r.d(g,"DayOfMonthPicker",(function(){return jo})),r.d(g,"EveryFrequency",(function(){return To})),r.d(g,"OnDayOfMonthPicker",(function(){return Lo}));var m={};r.r(m);var T={};r.r(T);var S={};r.r(S);var k=r("B8vQ"),R=r("9lL/"),P=r("g8L8");const h=e=>({type:"@@MT/EVENTS_PRO/SET_PREVIOUS_START_DATE_TIME",payload:{start:e}});var j=r("MWqi");const w="tec-events-pro",L=Object(j.createSelector)([e=>e[n.TEC_EVENTS_PRO_PLUGIN].blocks.datetime],e=>e.previousStart);var D=r("lSNA"),x=r.n(D),N=r("zCYh"),C=r("MXy+");function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const A={previousStart:Object(N.toDateTime)(C.defaultStartMoment)},Y={previousStart:"_EventStartDate"};const U="@@MT/EVENTS_PRO/ADD_EXCEPTION_RULE",F="@@MT/EVENTS_PRO/REMOVE_EXCEPTION_RULE",H="@@MT/EVENTS_PRO/EDIT_EXCEPTION_RULE",B=e=>({type:U,payload:e}),V=e=>({type:F,index:e}),G=(e,t)=>({type:H,index:e,payload:t});var W=r("6OzC"),K=r.n(W),$=r("UnPw"),X=r("gGza");const{__:q}=wp.i18n,J=q("day","tribe-events-calendar-pro"),z=q("week","tribe-events-calendar-pro"),Q=q("month","tribe-events-calendar-pro"),Z=q("year","tribe-events-calendar-pro"),ee=q("days","tribe-events-calendar-pro"),te=q("weeks","tribe-events-calendar-pro"),re=q("months","tribe-events-calendar-pro"),ne=q("years","tribe-events-calendar-pro"),oe=q("once","tribe-events-calendar-pro"),ce=q("daily","tribe-events-calendar-pro"),ie=q("weekly","tribe-events-calendar-pro"),se=q("monthly","tribe-events-calendar-pro"),le=q("yearly","tribe-events-calendar-pro"),ae=q("weekly (custom)","tribe-events-calendar-pro"),ue=q("monthly (custom)","tribe-events-calendar-pro"),de=q("yearly (custom)","tribe-events-calendar-pro"),pe=X.WEEKLY+"-custom",be=X.MONTHLY+"-custom",ye=X.YEARLY+"-custom",fe="isOffStart",Ee={label:ae,value:X.WEEKLY,id:pe},Oe={label:ue,value:X.MONTHLY,id:be},_e={label:de,value:X.YEARLY,id:ye},ve=[{label:oe,value:X.SINGLE,id:X.SINGLE},{label:ce,value:X.DAILY,id:X.DAILY},{label:ie,value:X.WEEKLY,id:X.WEEKLY},{label:se,value:X.MONTHLY,id:X.MONTHLY},{label:le,value:X.YEARLY,id:X.YEARLY}],ge=[Ee,Oe,_e],me=(e,t)=>t.index,Te=e=>e[n.TEC_EVENTS_PRO_PLUGIN].blocks.exception,Se=Object(j.createSelector)([Te,me],(e,t)=>e[t]),ke=Object(j.createSelector)([Se],e=>e.ruleTypes||ve),Re=Object(j.createSelector)([Se],e=>e.isOffStart),Pe=Object(j.createSelector)([Se],e=>e.offStartIndex),he=Object(j.createSelector)([Se],e=>e.typeId),je=Object(j.createSelector)([$.getType,he],(e,t)=>{const r=[...ve];return K()(r,r=>{const n=r.value===e;return t?n&&r.id===t:n})}),we=Object(j.createSelector)([he],e=>!!e&&e.includes("custom"));var Le=r("RmXt"),De=r("OuoG");function*xe(){const e=(yield Object(Le.select)($.getExceptions)).filter(e=>e.type!==X.SINGLE),t={isOffStart:!1,offStartIndex:-1,typeId:X.SINGLE};if(e.length){const e=ve.filter(e=>e.value===X.SINGLE);t.ruleTypes=e}else t.ruleTypes=ve;yield Object(Le.put)(B(t))}function*Ne(e){yield Object(Le.put)(V(e.index));const t=yield Object(Le.select)($.getExceptions);t.filter(e=>e.type!==X.SINGLE).length||(yield Object(Le.all)(t.map((e,t)=>Object(Le.put)(G(t,{ruleTypes:ve})))))}function*Ce(){const e=yield Object(Le.select)($.getExceptions);if(e.filter(e=>e.type!==X.SINGLE).length){const t=ve.filter(e=>e.value===X.SINGLE);yield Object(Le.all)(e.map((e,r)=>{if(e.type===X.SINGLE)return Object(Le.put)(G(r,{ruleTypes:t}))}))}else yield Object(Le.all)(e.map((e,t)=>Object(Le.put)(G(t,{ruleTypes:ve}))))}function*Ie(){yield Object(Le.takeEvery)([De.ADD_EXCEPTION_FIELD],xe),yield Object(Le.takeEvery)([De.REMOVE_EXCEPTION],Ne),yield Object(Le.takeEvery)([De.EDIT_EXCEPTION],Ce)}const Me=[],Ae=e=>{if(e.meta._tribe_blocks_recurrence_exclusions)try{const t=JSON.parse(e.meta._tribe_blocks_recurrence_exclusions),r=t.filter(e=>e.type!==X.SINGLE),n=ve.filter(e=>e.value===X.SINGLE);t.forEach((e,t)=>{const o={isOffStart:!1,offStartIndex:-1,typeId:e.type};r.length&&e.type===X.SINGLE?o.ruleTypes=n:o.ruleTypes=ve,Me.push(o)})}catch(e){console.error(e)}};var Ye=(e=Me,t)=>{switch(t.type){case U:return[...e,t.payload];case F:return e.filter((e,r)=>r!==t.index);case H:return((e,t)=>{const r=Object.assign({},e[t.index],t.payload);return 1===e.length?[r]:[...e.slice(0,t.index),r,...e.slice(t.index+1)]})(e,t);default:return e}};const Ue="@@MT/EVENTS_PRO/ADD_RECURRENCE_RULE",Fe="@@MT/EVENTS_PRO/REMOVE_RECURRENCE_RULE",He="@@MT/EVENTS_PRO/EDIT_RECURRENCE_RULE",Be=e=>({type:Ue,payload:e}),Ve=e=>({type:Fe,index:e}),Ge=(e,t)=>({type:He,index:e,payload:t});var We=r("iy/v");const Ke={label:ae,value:X.WEEKLY,id:pe},$e={label:ue,value:X.MONTHLY,id:be},Xe={label:de,value:X.YEARLY,id:ye},qe=[{label:oe,value:X.SINGLE,id:X.SINGLE},{label:ce,value:X.DAILY,id:X.DAILY},{label:ie,value:X.WEEKLY,id:X.WEEKLY},{label:se,value:X.MONTHLY,id:X.MONTHLY},{label:le,value:X.YEARLY,id:X.YEARLY}],Je=[Ke,$e,Xe],ze=(e,t)=>t.index,Qe=e=>e[n.TEC_EVENTS_PRO_PLUGIN].blocks.recurring,Ze=Object(j.createSelector)([Qe,ze],(e,t)=>e[t]),et=Object(j.createSelector)([Ze],e=>e.ruleTypes||qe),tt=Object(j.createSelector)([Ze],e=>e.isOffStart),rt=Object(j.createSelector)([Ze],e=>e.offStartIndex),nt=Object(j.createSelector)([Ze],e=>e.typeId),ot=Object(j.createSelector)([We.getType,nt],(e,t)=>{let r=[...qe];return t&&(r=[...r,...Je]),K()(r,r=>{const n=r.value===e;return t?n&&r.id===t:n})}),ct=Object(j.createSelector)([nt],e=>!!e&&e.includes("custom"));var it=r("tbMi"),st=r("gSph"),lt=r("pVH8"),at=r("13aI");function*ut(){const e=(yield Object(Le.select)(We.getRules)).filter(e=>e.type!==X.SINGLE),t={isOffStart:!1,offStartIndex:-1,typeId:X.SINGLE};if(e.length){const e=qe.filter(e=>e.value===X.SINGLE);t.ruleTypes=e}else t.ruleTypes=qe;yield Object(Le.put)(Be(t))}function*dt(e){yield Object(Le.put)(Ve(e.index));const t=yield Object(Le.select)(We.getRules);t.filter(e=>e.type!==X.SINGLE).length||(yield Object(Le.all)(t.map((e,t)=>Object(Le.put)(Ge(t,{ruleTypes:qe})))))}function*pt(e){if(e.sync)return;const t=yield Object(Le.select)(We.getRules);if(t.filter(e=>e.type!==X.SINGLE).length){const e=qe.filter(e=>e.value===X.SINGLE);yield Object(Le.all)(t.map((t,r)=>{if(t.type===X.SINGLE)return Object(Le.put)(Ge(r,{ruleTypes:e}))}))}else yield Object(Le.all)(t.map((e,t)=>Object(Le.put)(Ge(t,{ruleTypes:qe}))))}function*bt(){const e=(yield Object(Le.select)(We.getRulesCount))-1,t=yield Object(Le.call)(N.toMoment,it.TODAY),r=yield Object(Le.call)([t,"add"],1,"year"),n=yield Object(Le.call)(N.toDate,r),o=new Date(n);yield Object(Le.put)(at.syncRule(e,{[st.KEY_LIMIT_DATE_INPUT]:n,[st.KEY_LIMIT_DATE_OBJ]:o}))}function*yt(){yield Object(Le.takeEvery)([lt.ADD_RULE_FIELD],ut),yield Object(Le.takeEvery)([lt.REMOVE_RULE],dt),yield Object(Le.takeEvery)([lt.EDIT_RULE],pt),yield Object(Le.takeEvery)([lt.ADD_RULE],bt)}const ft=[],Et=e=>{if(e.meta._tribe_blocks_recurrence_rules)try{const t=JSON.parse(e.meta._tribe_blocks_recurrence_rules),r=t.filter(e=>e.type!==X.SINGLE),n=qe.filter(e=>e.value===X.SINGLE);t.forEach((e,t)=>{const o={isOffStart:!!e[fe],offStartIndex:-1,typeId:e.type};if(e[fe]){const r=[...qe,p[e.type.toUpperCase()+"_CUSTOM_RECURRENCE_RULE_TYPES_OPTION"]];o.offStartIndex=t,o.typeId=i[e.type.toUpperCase()+"_CUSTOM_TYPE_ID"],o.ruleTypes=r}else r.length&&e.type===X.SINGLE?o.ruleTypes=n:o.ruleTypes=qe;ft.push(o)})}catch(e){console.error(e)}};var Ot=(e=ft,t)=>{switch(t.type){case Ue:return[...e,t.payload];case Fe:return e.filter((e,r)=>r!==t.index);case He:return((e,t)=>{const r=Object.assign({},e[t.index],t.payload);return 1===e.length?[r]:[...e.slice(0,t.index),r,...e.slice(t.index+1)]})(e,t);default:return e}};const _t=e=>e.tickets,vt=Object(j.createSelector)([_t],e=>!!e),gt=Object(j.createSelector)([_t],e=>!!e&&!!e.blocks.rsvp.id),mt=Object(j.createSelector)([_t],e=>!!e&&!!e.blocks.ticket.tickets.allClientIds.length);var Tt=r("rKB8");const St=e=>{(e=>{const{meta:t}=e;Object.keys(Y).forEach(e=>{const r=Y[e];t.hasOwnProperty(r)&&(A[e]=t[r])})})(e),Et(e),Ae(e)};var kt=Object(Tt.combineReducers)({datetime:(e=A,t)=>{switch(t.type){case"@@MT/EVENTS_PRO/SET_PREVIOUS_START_DATE_TIME":return M(M({},e),{},{previousStart:t.payload.start});default:return e}},exception:Ye,recurring:Ot});const Rt=e=>e[n.TEC_EVENTS_PRO_PLUGIN].shared,Pt=Object(j.createSelector)([Rt],e=>e.dayOfMonthOptions);var ht=r("kczL"),jt=r("Yht6"),wt=r("SOG1"),Lt=r("tPgE"),Dt=r("OluY");const xt={1:X.FIRST,2:X.SECOND,3:X.THIRD,4:X.FOURTH,5:X.FIFTH},Nt={1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",7:"Sunday"},Ct=e=>{const t=e.isoWeekday();return Nt[t]},It=e=>{const t=e.date(),r=Math.floor((t-1)/7)+1;return xt[r]},Mt=e=>e.daysInMonth()-e.date()<7,At=e=>e.daysInMonth()===e.date(),Yt=e=>{const t=[],r=Object(ht.get)("tribe_events_pro_recurrence_strings"),n=It(e),o=Ct(e),c=n+o,i=r.customTablesV1.dayOfMonth.pattern[c];if(t.push({label:i.label,value:i.ordinal.toLowerCase()+"-"+i.day}),Mt(e)){const e="last"+o,n=r.customTablesV1.dayOfMonth.pattern[e];t.push({label:n.label,value:n.ordinal.toLowerCase()+"-"+n.day})}if(At(e)){const e="lastDay",n=r.customTablesV1.dayOfMonth.pattern[e];t.push({label:n.label,value:n.ordinal.toLowerCase()+"-"+n.day})}const s=e.date(),l=r.customTablesV1.dayOfMonth.date[s];return t.push({label:l,value:String(s)}),t},Ut=e=>{const t=e.split("-");if(1===t.length)return{[st.KEY_WEEK]:null,[st.KEY_DAY]:Number(t[0])};if(2===t.length){const e=t[0],r=Number(t[1]);return{[st.KEY_WEEK]:e,[st.KEY_DAY]:r}}return{}},{SINGLE:Ft,DAILY:Ht,WEEKLY:Bt,MONTHLY:Vt,YEARLY:Gt,LAST:Wt}=X;function*Kt({selectors:e},t,r){const n=yield Object(Le.select)(e.getWeek,{index:t}),o=yield Object(Le.select)(e.getDay,{index:t});if(!n&&o){return o===(yield Object(Le.call)([r,"date"]))}if(n){const e=yield Object(Le.call)([r,"isoWeekday"]),t=yield Object(Le.call)(It,r),c=yield Object(Le.call)(Mt,r),i=yield Object(Le.call)(At,r),s=o===e||8===o&&i;return(n===t||(c||i)&&n===Wt)&&s}return!1}function*$t({selectors:e},t,r){const n=((e,t)=>{const r=parseInt(t);return e?8===r?"last-day-in-month":"last"===e?"last-day-of-week-in-month":"day-of-week-in-month":t?"day-n":null})(yield Object(Le.select)(e.getWeek,{index:t}),yield Object(Le.select)(e.getDay,{index:t})),o=r.map(e=>{return(t=e.value)?"last-8"===t?"last-day-in-month":t.match(/(first|second|third|fourth|fifth)-\d/)?"day-of-week-in-month":t.match(/last-\d/)?"last-day-of-week-in-month":"day-n":null;var t}).indexOf(n);return o>=0?o:0}function*Xt(e,t,r){const n=yield Object(Le.call)(Yt,r.startMoment),o=yield Object(Le.call)($t,e,t,n),c=yield Object(Le.call)(Ut,n[o].value);yield Object(Le.put)(e.actions.sync(t,c))}function*qt(e,t,r){if(tecEventDetails.isRdate)return;const{startMoment:n,prevStartMoment:o}=r,c=yield Object(Le.call)([n,"isSame"],o,"day"),i=yield Object(Le.call)(Kt,e,t,n);c&&i||(yield Object(Le.call)(Xt,e,t,r))}function*Jt({actions:e,selectors:t},r,{startMoment:n,prevStartMoment:o}){const c=yield Object(Le.call)([n,"isoWeekday"]),i=yield Object(Le.call)([o,"isoWeekday"]),s=yield Object(Le.select)(t.getDays,{index:r});if(tecEventDetails.isRdate)return;if(c===i&&s.includes(c))return;const l=s.filter(e=>e!==i);l.includes(c)||(l.push(c),l.sort((e,t)=>e-t)),yield Object(Le.put)(e.sync(r,{[st.KEY_DAYS]:l}))}function*zt({actions:e,selectors:t},r,{startMoment:n,prevStartMoment:o}){const c=(yield Object(Le.call)([n,"month"]))+1,i=(yield Object(Le.call)([o,"month"]))+1,s=yield Object(Le.select)(t.getMonth,{index:r});if(tecEventDetails.isRdate)return;if(c===i&&s.includes(c))return;const l=s.filter(e=>e!==i);l.includes(c)||(l.push(c),l.sort((e,t)=>e-t)),yield Object(Le.put)(e.sync(r,{[st.KEY_MONTH]:l}))}function*Qt(e){const t=b,r=We,n={sync:at.syncRule},o=We.getRulesCount,c=yield Object(Le.select)(wt.getStart),i=yield Object(Le.call)(N.toMoment,c),s=yield Object(Le.select)(L),l=yield Object(Le.call)(N.toMoment,s),a=yield Object(Le.select)(o),u={startMoment:i,prevStartMoment:l};let d,p,y,f=0;const E=yield Object(Le.call)(Yt,i);for(yield Object(Le.put)((({options:e})=>({type:"@@MT/EVENTS_PRO/SET_DAY_OF_MONTH_OPTIONS",payload:{options:e}}))({options:E}));f<a;)if(d=yield Object(Le.select)(r.getType,{index:f}),p=yield Object(Le.select)(t.isRuleTypeCustom,{index:f}),y=yield Object(Le.call)([[Ft,Ht],"includes"],d),y||p)f++;else{switch(d){case Bt:yield Object(Le.call)(Jt,{actions:n,selectors:r},f,u);break;case Vt:yield Object(Le.call)(qt,{actions:n,selectors:r},f,u);break;case Gt:yield Object(Le.call)(zt,{actions:n,selectors:r},f,u),yield Object(Le.call)(qt,{actions:n,selectors:r},f,u)}f++}}function*Zt(e){const t=e===st.RECURRING,r=t?b:l,n=t?We:$,o=yield Object(Le.select)(t?We.getRulesCount:$.getExceptionsCount);let c,i,s,a,u,d=0;for(;d<o;){if(c=yield Object(Le.select)(n.getType,{index:d}),i=yield Object(Le.select)(r.isRuleTypeCustom,{index:d}),s=yield Object(Le.call)([[Bt,Vt,Gt],"includes"],c),s&&!i){a=yield Object(Le.call)([document,"querySelector"],".tribe-editor__events-pro__panel-header--"+e),a&&!a.classList.contains("tribe-editor__events-pro__panel-header--expanded")&&(u=yield Object(Le.call)([a,"querySelector"],"button"),u.click());break}d++}}function*er(){yield Object(Le.call)(Qt,{type:lt.EDIT_RULE}),yield Object(Le.call)(Zt,st.RECURRING),yield Object(Le.call)(Zt,st.EXCEPTION);const e=yield Object(Le.select)(wt.getStart);yield Object(Le.put)(h(e))}function*tr(e){if(e.sync)return;yield Object(Le.call)(Qt,e);const t=yield Object(Le.select)(wt.getStart);yield Object(Le.put)(h(t))}function*rr(e){if(e.sync)return;if(!e.payload.hasOwnProperty("typeId")||!e.payload.typeId.includes("custom"))return;const t=e.type===He,r=t?b:l,n=yield Object(Le.select)(r.getOffStartIndex,{index:e.index});if(-1===n)return;const o=t?Object(ht.postObjects)().tribe_events.meta._tribe_blocks_recurrence_rules[n]:Object(ht.postObjects)().tribe_events.meta._tribe_blocks_recurrence_exclusions[n],c=Object.keys(o).reduce((e,t)=>(fe===t||(e[t]=o[t]),e),{}),i=t?at.syncRule:Lt.syncException;yield Object(Le.put)(i(e.index,c))}const nr=e=>function*(t,r){if(yield Object(Le.select)(e.selectors.isRuleTypeCustom,{index:r}))return;const n=yield Object(Le.select)(e.proSelectors.getType,{index:r}),o={isOffStart:!1,offStartIndex:-1};(yield Object(Le.select)(e.proSelectors.getRules)).filter(e=>e.type!==Ft).length&&n===Ft||(o.ruleTypes=e.options.ruleTypeOptions),yield Object(Le.put)(e.actions.edit(r,o))};function*or(){const e=yield Object(Le.select)(Qe),t=yield Object(Le.select)(Te);yield Object(Le.all)(e.map((e,t)=>Object(Le.call)(nr({actions:{edit:Ge},selectors:b,proSelectors:We,options:{ruleTypeOptions:qe}}),e,t))),yield Object(Le.all)(t.map((e,t)=>Object(Le.call)(nr({actions:{edit:G},selectors:l,proSelectors:$,options:{ruleTypeOptions:ve}}),e,t)))}function*cr(){yield Object(Le.takeEvery)([jt.SET_START_DATE_TIME],er),yield Object(Le.takeEvery)([lt.EDIT_RULE],tr),yield Object(Le.takeEvery)([He],rr),yield Object(Le.takeEvery)([H],rr);const e=yield Object(Le.call)(Dt.createWPEditorChannel);for(;;)yield Object(Le.take)(e),yield Object(Le.call)(or)}var ir=r("wy2R");function sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ar={dayOfMonthOptions:Object(ir.isMoment)(C.defaultStartMoment)?Yt(C.defaultStartMoment):[]};function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const pr=tecEventDetails&&tecEventDetails.event?tecEventDetails.event:{};var br=(e=pr,t)=>{switch(t.type){case"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_EVENT":return dr(dr({},e),t.payload);default:return e}};function yr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Er=tecEventDetails&&tecEventDetails.occurrence?tecEventDetails.occurrence:{};var Or=(e=Er,t)=>{switch(t.type){case"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_OCCURRENCE":return fr(fr({},e),t.payload);default:return e}};function _r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const gr=tecEventDetails&&tecEventDetails.series?tecEventDetails.series:{};var mr=(e=gr,t)=>{switch(t.type){case"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_SERIES":return vr(vr({},e),t.payload);default:return e}};function Tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const kr=tecEventDetails||{};const Rr=e=>e[n.TEC_EVENTS_PRO_PLUGIN].eventDetails;Object(j.createSelector)([Rr],e=>e.event),Object(j.createSelector)([Rr],e=>e.occurrence),Object(j.createSelector)([Rr],e=>e.series);var Pr=(e=kr,t)=>{switch(t.type){case"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS":return Sr(Sr({},e),t.payload);case"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_EVENT":return Sr(Sr({},e),{},{event:br(e.event,t)});case"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_OCCURRENCE":return Sr(Sr({},e),{},{occurrence:Or(e.occurrence,t)});case"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_SERIES":return Sr(Sr({},e),{},{series:mr(e.series,t)});default:return e}},hr=Object(Tt.combineReducers)({blocks:kt,shared:(e=ar,t)=>{switch(t.type){case"@@MT/EVENTS_PRO/SET_DAY_OF_MONTH_OPTIONS":return lr(lr({},e),{},{dayOfMonthOptions:t.payload.options});default:return e}},eventDetails:Pr});const{dispatch:jr,select:wr,subscribe:Lr}=wp.data;var Dr=r("yXPU"),xr=r.n(Dr);const{apiFetch:Nr}=wp,{dispatch:Cr,select:Ir,subscribe:Mr}=wp.data,Ar={saving:!1,running:!1,noticeId:"tec-events-pro-occurrences",subscriptions:[],isSavingMetaBoxes:!1};function Yr(){return(Yr=xr()((function*(e){const t=yield Nr({path:`/tec/v1/events/${e}/notices/occurrences/`,method:"GET"});return Array.isArray(t)&&t?t.map(JSON.parse):[]}))).apply(this,arguments)}function Ur(){Array.from(Ar.subscriptions).map(e=>{e()}),Ar.subscriptions=[]}function Fr(e){return function(e){return Yr.apply(this,arguments)}(e).then(t=>{t.length<=0||(Cr("core/notices").createSuccessNotice(t.shift(),{id:Ar.noticeId,isDismissible:!0,__unstableHTML:!0,explicitDismiss:!1}),function(e){const t=Mr(()=>{Ir("core/notices").getNotices().filter(e=>e.id===Ar.noticeId).length<=0&&(t(),e())});Ar.subscriptions.push(t)}(function(e){return xr()((function*(){return yield Nr({path:`/tec/v1/events/${e}/notices/occurrences/`,method:"DELETE"})}))}(e)))})}function Hr(){if(!(Ir("core/edit-post").isSavingMetaBoxes()?(Ar.isSavingMetaBoxes=!0,0):Ar.isSavingMetaBoxes&&(Ar.isSavingMetaBoxes=!1,1))||Ar.running)return!1;const e=Ir("core/editor"),t=e.didPostSaveRequestSucceed();Ar.running=!0;const r=e.getCurrentPostId();return r&&t&&(Ur(),Fr(r).then(Br)),Ar.running}function Br(){Ar.running=!1;const e=Mr(Hr);return Ar.subscriptions.push(e),e}function Vr(){!function(){const e=Mr(()=>{const t=Ir("core/editor");if(!t.__unstableIsEditorReady())return;if(e(),t.isCleanNewPost())return;const r=t.getCurrentPostId();r&&(Ur(),Fr(r).then(Br))});Ar.subscriptions.push(e)}(),Br()}var Gr=()=>{(()=>{const e=Lr(()=>{wr("core/notices").getNotices().forEach(t=>{Dt.NOTICE_EDITING_SERIES===t.id&&(jr("core/notices").removeNotice(t.id),e())})}),t=Lr(()=>{wr("core/editor").__unstableIsEditorReady()&&t()})})(),Vr()};const Wr=e=>{St(e),(e=>{ar.dayOfMonthOptions=Yt(Object(N.toMoment)(e.meta._EventStartDate))})(e)},Kr=()=>{const e=k.globals.postObjects().tribe_events;e.is_new_post||Wr(e);const{dispatch:t,injectReducers:r}=P.store;[a.sagas,y.sagas,cr].forEach(e=>P.store.run(e)),Gr(),r({[n.TEC_EVENTS_PRO_PLUGIN]:hr}),t(R.actions.addPlugin(n.TEC_EVENTS_PRO_PLUGIN))},$r=()=>P.store;var Xr=r("cDcd");const{__:qr}=wp.i18n,Jr=e=>{const t=P.store.getState();return f.isEventTicketsActive(t)&&(f.hasRSVP(t)||f.hasTickets(t))?wp.element.createElement("div",{className:"tribe-editor__not-supported-message"},wp.element.createElement("p",{className:"tribe-editor__not-supported-message-text"},qr("Recurrence patterns are not yet supported for events with tickets or RSVPs.","tribe-events-calendar-pro"),wp.element.createElement("br",null),wp.element.createElement("a",{className:"tribe-editor__not-supported-message-link",href:"https://evnt.is/1b7a",target:"_blank",rel:"noopener noreferrer"},qr("Read about our plans for future features.","tribe-events-calendar-pro")))):e};var zr=()=>{wp.hooks.addFilter("blocks.recurrence.renderRecurrenceHook","tec/filterRenderRecurrence",Jr)};const Qr=(e,t)=>null;var Zr=()=>{wp.hooks.addFilter("blocks.recurrenceDescription.contentHook","tec/filterRecurrenceDescription",Qr)};r("O7uX");Kr(),zr(),Zr();var en=r("HJt2");const{toMoment:tn}=k.moment,rn=()=>{tec.editorDialog.el.$instance.empty()},nn=e=>{e.forEach((function(e){"text"===e.type?tec.editorDialog.el.$instance.append(function(e){return`<div class="tec-events-pro-dialog__text-row">\n\t\t<p class="tec-events-pro-dialog__text">\n\t\t\t${e.text}\n\t\t</p>\n\t</div>`}(e)):tec.editorDialog.el.$instance.append(function(e){const t=e.checked?"checked":"",r=["tec-events-pro-dialog__input-row","tec-events-pro-dialog__input-row--"+e.type].concat(e.classes).join(" "),n=["tec-events-pro-dialog__radio-input"].concat(e.inputClasses).join(" "),o=["tec-events-pro-dialog__radio-input-label"].concat(e.labelClasses).join(" "),c="tec-events-pro-dialog__radio-input--"+e.type;let i=`<div class="${r}">\n\t\t<input type="radio" name="_tec_update_type" value="${e.type}" class="${n}" id="${c}" ${t} />\n\t\t<label class="${o}" for="${c}">\n\t\t\t${e.label}`;return e.labelHelpText&&(i+='<div><em style="font-style: italic; color: gray; font-size: 90%">'+e.labelHelpText+"</em></div>"),i+="</label></div>",i}(e))}))},on=()=>{const e=[window.tecEventsSeriesBlockEditor.thisEvent],t=$r().getState(),r=en.selectors.getStart(t),n=tn(r);if(!n.isValid())return e[0];const o=en.selectors.getAllDay(t),c=en.selectors.getDateSeparator(t);let i=n.format("MMMM D, YYYY");return i+=o?" "+window.tecEventsSeriesBlockEditor.allDay:` ${c} ${n.format("H:mma")}`,i=`(${i})`,e.push(i),e.join(" ")};var cn=()=>{tec.editorDialog.setupDialog()};const{select:sn}=wp.data,ln={isSavingPost:!1},an="button.editor-post-publish-button",un="button.editor-post-save-draft",dn="#_tec_relationship_event_to_series",pn=".tec-events-pro-series__edit-link-container",bn=".tec-events-pro-series__edit-link";function yn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{dispatch:En,select:On}=wp.data,_n=()=>{const{editPost:e,savePost:t}=En("core/editor"),r=tec.editorDialog.el.$instance.find("input:checked").val(),n=On("core/editor").getCurrentPost();tec.editorDialog.closeDialog(),e({_tec_update_type:r,_tec_initial_meta:n}),t()},vn=()=>{const e=[],t=(()=>{const e=$r().getState(),t=Object(wt.getStart)(e).split(" ")[0],r=sn("core/editor").getCurrentPost(),{meta:n}=r;return n._EventStartDate.split(" ")[0]!==t})(),r=(()=>{const e=$r().getState(),t=Object(We.getRules)(e),r=sn("core/editor").getCurrentPost(),{meta:n}=r;return(""===n._tribe_blocks_recurrence_rules?"[]":n._tribe_blocks_recurrence_rules)!==JSON.stringify(t)})()||(()=>{const e=$r().getState(),t=Object($.getExceptions)(e),r=sn("core/editor").getCurrentPost(),{meta:n}=r;return(""===n._tribe_blocks_recurrence_exclusions?"[]":n._tribe_blocks_recurrence_exclusions)!==JSON.stringify(t)})(),n=window.tecEventsSeriesBlockEditor,o={single:!0,upcoming:!0,all:!0};return!t||tecEventDetails&&tecEventDetails.isRdate||(o.all=!1),r&&(o.single=!1),o.all||o.single?(o.single&&e.push({type:"single",label:on(),labelHelpText:n.thisEventHelpText,classes:[],inputClasses:[],labelClasses:[],checked:!1}),e.push({type:"upcoming",label:n.upcomingSetting,classes:[],inputClasses:[],labelClasses:[],checked:!o.all}),o.all&&e.push({type:"all",label:n.allEvents,classes:[],inputClasses:[],labelClasses:[],checked:!0}),e):(e.push({type:"text",text:n.effectThisAndFollowingEventsWarning}),e.push({type:"upcoming",label:n.upcomingSetting,classes:["hidden"],inputClasses:[],labelClasses:[],checked:!0}),e)},gn=()=>{tec.editorDialog.el.$instance.attr("title",window.tecEventsSeriesBlockEditor.editModalTitle),rn(),nn(vn()),tec.editorDialog.setDialogSettings(fn(fn({},tec.editorDialog.defaultDialogSettings),{},{buttons:[{class:"button-primary",text:window.tecEventsSeriesBlockEditor.okButton,click:_n}]})),tec.editorDialog.openDialog()},mn=()=>{const e=On("core/editor").getCurrentPost(),{meta:t}=e;if(t._tec_requires_first_save)return;""!==t._tribe_blocks_recurrence_rules&&"[]"!==t._tribe_blocks_recurrence_rules&&gn()},{dispatch:Tn,select:Sn,subscribe:kn}=wp.data,Rn={unsubscribe:null},Pn=()=>{const{meta:e}=Sn("core/editor").getCurrentPost();if(!e)return;if(Sn("core/editor").isSavingPost())return;Rn.unsubscribe&&Rn.unsubscribe();const{lockPostSaving:t,lockPostAutosaving:r,unlockPostSaving:n,unlockPostAutosaving:o}=Tn("core/editor");(()=>{const{getCurrentPost:e,isEditedPostDirty:t,isEditedPostNew:r}=Sn("core/editor"),{meta:n}=e();if(n&&n._tec_requires_first_save)return!1;const o=""!==n._tribe_blocks_recurrence_rules&&"[]"!==n._tribe_blocks_recurrence_rules;return!r()&&(t()&&o)})()?(r(),t(),(()=>{const e=document.querySelector("button.editor-post-publish-button");e&&(e.setAttribute("aria-disabled","false"),e.removeEventListener("click",mn),e.addEventListener("click",mn))})()):(n(),o(),(()=>{const e=document.querySelector("button.editor-post-publish-button");e&&e.removeEventListener("click",mn)})()),Rn.unsubscribe=kn(Pn)};var hn=()=>{Rn.unsubscribe=kn(Pn)};function jn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const{dispatch:Ln,select:Dn,subscribe:xn}=wp.data,Nn={deleteButton:null},Cn=()=>{const e=tec.editorDialog.el.$instance.find("input:checked").val();Ln("core/notices").removeNotice("TRASH_POST_NOTICE_ID");const t=Dn("core/editor").getCurrentPostType(),r=Dn("core").getPostType(t),n=Dn("core/editor").getCurrentPost();wp.apiFetch({path:`/wp/v2/${r.rest_base}/${n.id}?_tec_update_type=${e}`,method:"DELETE"}).then(e=>{window.location.replace(e._tec_redirect_url)}).catch(e=>{console.error(e)})},In=()=>{const e=window.tecEventsSeriesBlockEditor;tec.editorDialog.el.$instance.attr("title",e.trashRecurringEvent),rn(),nn((()=>{const e=[],t=window.tecEventsSeriesBlockEditor;return e.push({type:"single",label:on(),classes:[],inputClasses:[],labelClasses:[],checked:!1}),e.push({type:"upcoming",label:t.upcomingSetting,classes:[],inputClasses:[],labelClasses:[],checked:!1}),e.push({type:"all",label:t.allEvents,classes:[],inputClasses:[],labelClasses:[],checked:!0}),e})()),tec.editorDialog.setDialogSettings(wn(wn({},tec.editorDialog.defaultDialogSettings),{},{buttons:[{class:"button-primary",text:window.tecEventsSeriesBlockEditor.okButton,click:Cn}]})),tec.editorDialog.openDialog()},Mn=e=>{const t=Dn("core/editor").getCurrentPost(),{meta:r}=t;""!==r._tribe_blocks_recurrence_rules&&"[]"!==r._tribe_blocks_recurrence_rules&&(e.preventDefault(),e.stopPropagation(),In())},An=()=>{const{isEditedPostNew:e,getCurrentPostId:t,getCurrentPostType:r}=Dn("core/editor"),{getPostType:n,canUser:o}=Dn("core"),c=t();if(!c)return!1;const i=n(r()),s=i&&i.rest_base||"",l=!(!c||!s)&&o("delete",s,c);return!e()&&c&&l},Yn=()=>{const e=Dn("core/edit-post").isEditorSidebarOpened();if(!e||Nn.deleteButton&&Nn.deleteButton.isConnected)!e&&Nn.deleteButton&&(Nn.deleteButton.removeEventListener("click",Mn),Nn.deleteButton=null);else{const e=setInterval(()=>{const t=document.querySelector("button.editor-post-trash");t&&(clearInterval(e),Nn.deleteButton=t,Nn.deleteButton.addEventListener("click",Mn))},10)}};var Un=()=>{An()&&Yn(),xn(()=>{An()&&Yn()})};cn(),hn(),Un();var Fn=r("K2gz"),Hn=r.n(Fn),Bn=r("6Ugf"),Vn=r("PSCs");const{addFilter:Gn}=wp.hooks,Wn=Object(ht.get)("tribe_events_pro_recurrence_strings"),{lockIconTooltip:Kn}=Wn.customTablesV1.recurrence,$n=(e,t)=>{var r;const{blockType:n,checked:o,className:c,disabled:i,id:s,index:a,labelComponent:u,onChange:d,value:p}=t,y=P.store.getState(),f=n!==Vn.constants.RECURRING,E=(f?l:b).isRuleTypeCustom(y,{index:a}),O=Object(N.toMoment)(Object(wt.getStart)(y)),_=Ct(O),v="undefined"!=typeof tecEventDetails&&!(null!==(r=tecEventDetails)&&void 0!==r&&r.isRdate)&&!f&&!E&&_.toLowerCase()===p;return wp.element.createElement("div",{className:Hn()("tribe-editor__day-of-week",c)},wp.element.createElement(Bn.Checkbox,{checked:o,disabled:i,id:s,label:u,onChange:d,value:p}),v&&wp.element.createElement("span",{className:"tribe-editor__day-of-week__lock dashicons dashicons-lock",title:Kn}))};var Xn=()=>{Gn("elements.dayOfWeek.dayOfWeekContentHook","tec/filterDayOfWeekContent",$n)};const{addFilter:qn}=wp.hooks,{__:Jn}=wp.i18n;var zn=()=>{qn("elements.exceptionField.singularTypePickerRowLabelHook","tec/filterSingularTypePickerRowLabelHook",()=>Jn("Not","tribe-events-calendar-pro"))},Qn=r("8N8N"),Zn=r("h74D"),eo=r("rf6O"),to=r.n(eo);const{__:ro}=wp.i18n,no=({afterLabel:e,blockType:t,className:r,disabled:n,index:o,selected:c})=>wp.element.createElement(Qn.LabeledRow,{className:Hn()("tribe-editor__every-frequency",r),label:ro("Every","tribe-events-calendar-pro")},wp.element.createElement(Qn.FrequencySelect,{blockType:t,disabled:n,index:o,selected:c}),wp.element.createElement("span",{className:"tribe-editor__after-every-frequency"},e));no.propTypes={afterLabel:to.a.string.isRequired,blockType:to.a.oneOf(st.BLOCK_TYPES),className:to.a.string,disabled:to.a.bool,index:to.a.number.isRequired,selected:R.proptypes.ReactSelectOption.isRequired};var oo=no,co=r("Q9xL");const{RECURRING:io}=st,{DAILY:so,WEEKLY:lo,MONTHLY:ao,YEARLY:uo}=X,{DAY_LABEL:po,WEEK_LABEL:bo,MONTH_LABEL:yo,YEAR_LABEL:fo,DAY_LABEL_PLURAL:Eo,WEEK_LABEL_PLURAL:Oo,MONTH_LABEL_PLURAL:_o,YEAR_LABEL_PLURAL:vo}=i,go=(e,t)=>(t.blockType===io?We:$).getTypeOption(e,t),mo=(e,t)=>{const r=((e,t)=>(t.blockType===io?We:$).getBetween(e,t))(e,t)>1;let n="";switch(t.selected.value){case so:n=r?Eo:po;break;case lo:n=r?Oo:bo;break;case ao:n=r?_o:yo;break;case uo:n=r?vo:fo}return n};var To=Object(Tt.compose)(Object(co.withStore)(),Object(Zn.connect)((e,t)=>({afterLabel:mo(e,t),selected:go(e,t)})))(oo),So=r("l3Sj");r("644Q");const ko=({className:e,isCustom:t,onChange:r,options:n,value:o})=>wp.element.createElement("div",{className:Hn()("tribe-editor__day-of-month-picker",e)},wp.element.createElement(Bn.Select,{className:"tribe-editor__day-of-month-picker__day-of-month-select",backspaceRemovesValue:!1,value:o,isDisabled:t,isSearchable:!1,options:n,onChange:r}));ko.propTypes={className:to.a.string,isCustom:to.a.bool,onChange:to.a.func,options:to.a.arrayOf(R.proptypes.ReactSelectOption).isRequired,value:R.proptypes.ReactSelectOptions.isRequired};var Ro=ko,Po=r("JXX8"),ho=r("Rkpb");var jo=Object(Tt.compose)(Object(co.withStore)(),Object(Zn.connect)((e,t)=>{var r;const n=t.blockType===Vn.constants.RECURRING?Po.selectors:ho.selectors,o=(e=>{const{week:t,day:r}=e;return t?`${t}-${r}`:String(r)})({week:n.getWeek(e,t),day:n.getDay(e,t)}),c="undefined"!=typeof tecEventDetails&&(null===(r=tecEventDetails)||void 0===r?void 0:r.isRdate),i=t.isCustom||c?(e=>{const t=e.split("-"),r=Object(ht.get)("tribe_events_pro_recurrence_strings");if(1===t.length){const e=t[0];return[{label:r.customTablesV1.dayOfMonth.date[e],value:String(e)}]}if(2===t.length){const e=t[0]+Nt[t[1]],n=r.customTablesV1.dayOfMonth.pattern[e];return[{label:n.label,value:n.ordinal.toLowerCase()+"-"+n.day}]}return[]})(o):E.getDayOfMonthOptions(e,t);let s=K()(i,e=>o===e.value);return s=!s&&i.length>0?i[0]:s,{options:i,value:s}},(e,t)=>({onChange:r=>{const n=t.blockType===Vn.constants.RECURRING?Po.actions.editRule:ho.actions.editException,o=Ut(r.value);e(n(t.index,o))}})))(Ro);const wo=({blockType:e,className:t,index:r,isCustom:n})=>wp.element.createElement(Qn.LabeledRow,{className:Hn()("tribe-editor__on-day-of-month-picker",t),label:Object(So.__)("On the","tribe-events-calendar-pro")},wp.element.createElement(jo,{blockType:e,isCustom:n,index:r}));wo.propTypes={blockType:to.a.oneOf(st.BLOCK_TYPES),className:to.a.string,index:to.a.number.isRequired,isCustom:to.a.bool};var Lo=wo;const Do=(e,t)=>{const{blockType:r,index:n}=t,o=P.store.getState(),c=r===st.RECURRING?b:l,i=c.getTypeOption(o,{index:n}),s=c.isRuleTypeCustom(o,{index:n});return wp.element.createElement(To,{blockType:r,disabled:s,index:n,selected:i})},xo=(e,t)=>{const{blockType:r,index:n}=t,o=(r===st.RECURRING?b:l).isRuleTypeCustom(P.store.getState(),{index:n});return wp.element.createElement(Qn.OnDayOfWeek,{blockType:r,sundayDisabled:o,mondayDisabled:o,tuesdayDisabled:o,wednesdayDisabled:o,thursdayDisabled:o,fridayDisabled:o,saturdayDisabled:o,index:n})},No=(e,t)=>{const{blockType:r,index:n}=t,o=(r===st.RECURRING?b:l).isRuleTypeCustom(P.store.getState(),{index:n});return wp.element.createElement(Lo,{blockType:r,isCustom:o,index:n})},Co=(e,t)=>{const{blockType:r,index:n}=t,o=(r===st.RECURRING?b:l).isRuleTypeCustom(P.store.getState(),{index:n});return wp.element.createElement(Qn.InMonth,{blockType:r,disabled:o,index:n})},Io=(e,t)=>{const{blockType:r,index:n}=t,o=(r===st.RECURRING?b:l).isRuleTypeCustom(P.store.getState(),{index:n});return wp.element.createElement(Qn.SeriesEnds,{blockType:r,dayPickerInputDisabled:o,numberInputDisabled:o,selectDisabled:o,index:n})},{addFilter:Mo}=wp.hooks,{__:Ao}=wp.i18n;var Yo=()=>{Mo("elements.exceptionField.dailyTypePickerRowLabelHook","tec/filterDailyTypePickerRowLabelHook",()=>Ao("Not","tribe-events-calendar-pro")),Mo("elements.exceptionField.dailyAfterTypePickerHook","tec/filterDailyAfterTypePicker",Do),Mo("elements.exceptionField.dailySeriesEndsRowLabelHook","tec/filterDailySeriesEndsRowLabel",()=>{})};const{addFilter:Uo}=wp.hooks,{__:Fo}=wp.i18n;var Ho=()=>{Uo("elements.exceptionField.weeklyTypePickerRowLabelHook","tec/filterWeeklyTypePickerRowLabelHook",()=>Fo("Not","tribe-events-calendar-pro")),Uo("elements.exceptionField.weeklyAfterTypePickerHook","tec/filterWeeklyAfterTypePicker",Do),Uo("elements.exceptionField.weeklyOnDayOfWeekHook","tec/filterWeeklyOnDayOfWeek",xo),Uo("elements.exceptionField.weeklySeriesEndsHook","tec/filterWeeklySeriesEnds",Io)};const{addFilter:Bo}=wp.hooks,{__:Vo}=wp.i18n;var Go=()=>{Bo("elements.exceptionField.monthlyTypePickerRowLabelHook","tec/filterMonthlyTypePickerRowLabelHook",()=>Vo("Not","tribe-events-calendar-pro")),Bo("elements.exceptionField.monthlyAfterTypePickerHook","tec/filterMonthlyAfterTypePicker",Do),Bo("elements.exceptionField.monthlySeriesEndsHook","tec/filterMonthlySeriesEnds",Io)};const{addFilter:Wo}=wp.hooks,{__:Ko}=wp.i18n;var $o=()=>{Wo("elements.exceptionField.yearlyTypePickerRowLabelHook","tec/filterYearlyTypePickerRowLabelHook",()=>Ko("Not","tribe-events-calendar-pro")),Wo("elements.exceptionField.yearlyAfterTypePickerHook","tec/filterYearlyAfterTypePicker",Do),Wo("elements.exceptionField.yearlyInMonthHook","tec/filterYearlyInMonth",Co),Wo("elements.exceptionField.yearlySeriesEndsHook","tec/filterYearlySeriesEnds",Io)};var Xo=()=>{zn(),Yo(),Ho(),Go(),$o()};const{addFilter:qo}=wp.hooks,Jo=(e,t,r)=>l.getExceptionRuleTypes(t,{index:r});var zo=()=>{qo("elements.exceptionForm.exceptionFieldOptionsHook","tec/filterExceptionFieldOptions",Jo)},Qo=r("GE2E");const{addFilter:Zo}=wp.hooks,ec=Object(ht.get)("tribe_events_pro_recurrence_strings"),{lockIconTooltip:tc}=ec.customTablesV1.recurrence,rc=(e,t)=>{const{blockType:r,children:n,className:o,disabled:c,index:i,onClick:s,value:a}=t,u=r===Vn.constants.RECURRING,d=P.store.getState(),p=(u?b:l).isRuleTypeCustom(d,{index:i}),y=Object(N.toMoment)(Object(wt.getStart)(d)).month()+1,f=Object(Xr.useMemo)(()=>!u||p||y!==X.MONTHS_OF_THE_YEAR_MAPPING_TO_STATE[a]?wp.element.createElement(Xr.Fragment,null,wp.element.createElement(Qo.Close,null),wp.element.createElement("span",{className:"tribe-editor__month-tag__remove"},Object(So.__)("Remove","tribe-events-calendar-pro"))):wp.element.createElement("span",{className:"tribe-editor__month-tag__lock dashicons dashicons-lock",title:tc}),[u,p,y,a]);return wp.element.createElement("button",{className:Hn()({"tribe-editor__month-tag":!0,"tribe-editor__month-tag--disabled":c},o),disabled:c,onClick:s},f,n)};var nc=()=>{Zo("elements.monthTag.monthTagContentHook","tec/filterMonthTagContent",rc)};const{addFilter:oc}=wp.hooks,{__:cc}=wp.i18n;var ic=()=>{oc("elements.recurringField.singularTypePickerRowLabelHook","tec/filterSingularTypePickerRowLabelHook",()=>cc("Happens","tribe-events-calendar-pro"))};const{addFilter:sc}=wp.hooks,{__:lc}=wp.i18n;var ac=()=>{sc("elements.recurringField.dailyFromTimeRangePickerHook","tec/filterDailyFromTimeRangePicker",()=>null),sc("elements.recurringField.dailyRecurringToDateTimePickerHook","tec/filterDailyFromTimeRangePicker",()=>null),sc("elements.recurringField.dailyTypePickerRowLabelHook","tec/filterDailyTypePickerRowLabelHook",()=>lc("Happens","tribe-events-calendar-pro")),sc("elements.recurringField.dailyAfterTypePickerHook","tec/filterDailyAfterTypePicker",Do)};const{addFilter:uc}=wp.hooks,{__:dc}=wp.i18n;var pc=()=>{uc("elements.recurringField.weeklyFromTimeRangePickerHook","tec/filterWeeklyFromTimeRangePicker",()=>null),uc("elements.recurringField.weeklyRecurringToDateTimePickerHook","tec/filterWeeklyFromTimeRangePicker",()=>null),uc("elements.recurringField.weeklyTypePickerRowLabelHook","tec/filterWeeklyTypePickerRowLabelHook",()=>dc("Happens","tribe-events-calendar-pro")),uc("elements.recurringField.weeklyAfterTypePickerHook","tec/filterWeeklyAfterTypePicker",Do),uc("elements.recurringField.weeklyOnDayOfWeekHook","tec/filterWeeklyOnDayOfWeek",xo),uc("elements.recurringField.weeklySeriesEndsHook","tec/filterWeeklySeriesEnds",Io)};const{addFilter:bc}=wp.hooks,{__:yc}=wp.i18n;var fc=()=>{bc("elements.recurringField.monthlyFromTimeRangePickerHook","tec/filterMonthlyFromTimeRangePicker",()=>null),bc("elements.recurringField.monthlyRecurringToDateTimePickerHook","tec/filterMonthlyFromTimeRangePicker",()=>null),bc("elements.recurringField.monthlyTypePickerRowLabelHook","tec/filterMonthlyTypePickerRowLabelHook",()=>yc("Happens","tribe-events-calendar-pro")),bc("elements.recurringField.monthlyAfterTypePickerHook","tec/filterMonthlyAfterTypePicker",Do),bc("elements.recurringField.monthlyOnDayOfMonthPickerHook","tec/filterMonthlyOnDayOfMonthPicker",No),bc("elements.recurringField.monthlySeriesEndsHook","tec/filterMonthlySeriesEnds",Io)};const{addFilter:Ec}=wp.hooks,{__:Oc}=wp.i18n;var _c=()=>{Ec("elements.recurringField.yearlyFromTimeRangePickerHook","tec/filterYearlyFromTimeRangePicker",()=>null),Ec("elements.recurringField.yearlyRecurringToDateTimePickerHook","tec/filterYearlyFromTimeRangePicker",()=>null),Ec("elements.recurringField.yearlyTypePickerRowLabelHook","tec/filterYearlyTypePickerRowLabelHook",()=>Oc("Happens","tribe-events-calendar-pro")),Ec("elements.recurringField.yearlyAfterTypePickerHook","tec/filterYearlyAfterTypePicker",Do),Ec("elements.recurringField.yearlyInMonthHook","tec/filterYearlyInMonth",Co),Ec("elements.recurringField.yearlyOnDayOfMonthPickerHook","tec/filterYearlyOnDayOfMonthPicker",No),Ec("elements.recurringField.yearlySeriesEndsHook","tec/filterYearlySeriesEnds",Io)};var vc=()=>{ic(),ac(),pc(),fc(),_c()};const{__:gc,sprintf:mc}=wp.i18n,{addFilter:Tc}=wp.hooks,Sc=(e,t,r)=>b.getRecurrenceRuleTypes(t,{index:r});var kc=()=>{var e;Tc("elements.recurringForm.recurringFieldOptionsHook","tec/filterRecurringFieldOptions",Sc),"undefined"!=typeof tecEventDetails&&null!==(e=tecEventDetails)&&void 0!==e&&e.isRdateNoticeParts&&Tc("elements.recurringForm.outputBeforeRecurringForm","tec/filterRecurringForm",e=>{const{name:t,url:r}=tecEventDetails.isRdateNoticeParts,n=mc(gc("This is a single occurrence. To change recurrence rules, go to %1$s.","tribe-events-calendar-pro"),`<a href=${r}>${t}</a>`);return wp.element.createElement("div",null,wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:n}}))})};const{Tooltip:Rc}=wp.components,{addFilter:Pc}=wp.hooks,{__:hc}=wp.i18n,jc=(e,t)=>{const{afterSelect:r,blockType:n,dispatch:o,index:i,options:s,selected:l}=t,a=n===Vn.constants.RECURRING,u=a?Po.actions.editRule:ho.actions.editException,p=a?d.editRecurrenceRule:c.editExceptionRule;return wp.element.createElement(Xr.Fragment,null,wp.element.createElement(Bn.Select,{className:"tribe-editor__type-picker__type-select",backspaceRemovesValue:!1,value:l,isSearchable:!1,options:s,onChange:e=>{o(p(i,{typeId:e.id})),o(u(i,{[Vn.constants.KEY_TYPE]:e.value}))},getOptionValue:e=>e.id}),r)},wc=(e,t,r)=>(r.blockType===Vn.constants.RECURRING?b:l).getTypeOption(t,r),Lc=(e,t,r)=>{const{blockType:n,index:o}=r;if(n===Vn.constants.EXCEPTION)return e;if(!b.isRuleTypeCustom(t,{index:o}))return e;const c=hc("This custom recurrence rule was created in a different calendar system\n\r and cannot be edited. Select a different option to create a new rule.","tribe-events-calendar-pro");return wp.element.createElement(Rc,{text:c},wp.element.createElement("span",{"aria-label":c,className:"tribe-editor__type-picker__type-select-after-tooltip dashicons dashicons-info",tabIndex:"0"}))};var Dc=()=>{Pc("elements.typePicker.typePickerContentHook","tec/filterTypePickerContent",jc),Pc("elements.typePicker.typePickerSelectedOptionHook","tec/filterTypePickerSelectedOption",wc),Pc("elements.typePicker.afterTypePickerSelectHook","tec/filterAfterTypePickerSelect",Lc)};r("Ixdi");function xc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xc(Object(r),!0).forEach((function(t){x()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(()=>{Xn(),Xo(),zo(),nc(),vc(),kc(),Dc()})();const{subscribe:Cc,select:Ic}=wp.data,Mc=window.jQuery,Ac={isSavingMetaBoxes:!1};let Yc=0,Uc=null,Fc=null;const Hc={onMetaboxSave:null,listenForSaveClick:null},Bc=(e,t,r)=>Nc(Nc({},tec.editorDialog.defaultDialogSettings),{},{closeOnEscape:!1,dialogClass:"redirect-no-close",buttons:[{class:"button-primary",text:t,click:()=>(e=>{tec.editorDialog.closeDialog(),window.location.replace(e)})(r)}],title:e}),Vc=e=>{if(!e||!e.data)return;Uc=e.data;const{location:t,title:r,message:n,confirmButtonLabel:o,forceRedirect:c}=Uc;c&&t?window.location.replace(t):t&&r&&n&&o&&(Hc.onMetaboxSave&&Hc.onMetaboxSave(),Hc.listenForSaveClick&&Hc.listenForSaveClick(),rn(),nn((e=>{const t=[];return t.push({type:"text",text:e}),t})(n)),tec.editorDialog.setDialogSettings(Bc(r,o,t)),tec.editorDialog.openDialog(),Fc||(Fc=document.createElement("style"),Fc.type="text/css",Fc.innerText=".redirect-no-close .ui-dialog-titlebar-close {display: none;}"),Fc.isConnected||document.head.appendChild(Fc))},Gc=()=>{if(!window.tecCustomTablesV1BlocksEditor)return;const e=Ic("core/editor"),{ajaxurl:t,redirectAction:r,redirectNonceName:n,redirectNonce:o,eventPostId:c}=tecCustomTablesV1BlocksEditor;Yc=0,Mc.get(t,{action:r,[n]:o,event_id:e.getCurrentPostId(),event_post_id:c}).done(Vc).fail(Wc)},Wc=(e,t,r)=>{if(Yc+=1,Yc<3)return console.error("tec_custom_tables_v1_redirect_data ajax request failed, retrying again.",r),void Gc();console.error("tec_custom_tables_v1_redirect_data ajax request failed:",r)},Kc=()=>{(Ic("core/edit-post").isSavingMetaBoxes()?(Ac.isSavingMetaBoxes=!0,0):Ac.isSavingMetaBoxes&&(Ac.isSavingMetaBoxes=!1,1))&&Gc()};(()=>{Hc.onMetaboxSave=Cc(Kc)})();const{Button:$c}=wp.components,{PluginPostStatusInfo:Xc}=wp.editPost,{__:qc}=wp.i18n;var Jc=({status:e})=>""!==tec_events_pro_duplicate.duplicate_link&&"auto-draft"!==e&&wp.element.createElement(Xc,null,wp.element.createElement($c,{isTertiary:!0,className:"tec-event-duplicate-action__duplicate-link",href:tec_events_pro_duplicate.duplicate_link,style:{marginLeft:"-6px",textDecoration:"underline"},target:"_blank"},qc("Duplicate","tribe-events-calendar-pro")));const zc=wp.data.withSelect(e=>({select:e("core/editor").getEditedPostAttribute("status")}));var Qc=Object(Tt.compose)(zc)(Jc);wp.plugins.registerPlugin("tec-event-duplicate",{render:Qc});const{subscribe:Zc,select:ei}=wp.data,ti=window.jQuery;let ri=0;const ni={saveButton:null,saveDraftButton:null,eventSeriesSelect:null},oi="hidden",ci={listenForEventSeriesSelect:null,getSeriesData:null},ii={isSavingPost:!1,isSavingMetaBoxes:!1},si=e=>{const t={title:null,id:null};return"string"==typeof e&&(t.title=e),"object"==typeof e&&(t.title=e.title,t.id=e.id),t},li=e=>JSON.stringify(e),ai=()=>{if(!window.tecCustomTablesV1BlocksEditor)return;const e=ei("core/editor"),{ajaxurl:t,seriesAction:r,seriesNonce:n,seriesNonceName:o}=tecCustomTablesV1BlocksEditor;ti.get(t,{action:r,[o]:n,event_id:e.getCurrentPostId()}).done(e=>{yi(e),ri=0}).fail(fi)},ui=()=>{(ei("core/edit-post").isSavingMetaBoxes()?(ii.isSavingMetaBoxes=!0,0):ii.isSavingMetaBoxes&&(ii.isSavingMetaBoxes=!1,1))&&ai()},di=()=>{ni.eventSeriesSelect||(ni.eventSeriesSelect=document.querySelector(dn))},pi=e=>{const t=e.data.$target,r=t.find(":selected");if(!r.length)return;const n=t.parent().find(pn);if("-1"===r.val())return void n.addClass(oi);const o=r.data("editLink");o?(n.find(bn).attr("href",o),n.removeClass(oi)):n.addClass(oi)},bi=()=>{if(di(),!ni.eventSeriesSelect)return;if("-1"!==String(ni.eventSeriesSelect.value))return;const e=(()=>{const e=ei("core/editor"),t=String(e.getPostEdits().title).trim();return"undefined"!==t?String(t):String(e.getCurrentPost().title).trim()})();if(!e.length)return;const t=li(si(e)),r=new Option(e,t,!0,!0);ti(ni.eventSeriesSelect).append(r).trigger("change")},yi=e=>{const t=ti(ni.eventSeriesSelect),r=t.find(":selected");if(void 0!==e.data.id&&void 0!==e.data.edit_link){if(e.data.id){const t=li(si(e.data));r.attr("value",t)}e.data.edit_link&&r.attr("data-edit-link",e.data.edit_link),t.trigger("change")}},fi=(e,t,r)=>{if(ri+=1,ri<3)return console.error("tec_custom_tables_v1_series_data ajax request failed, retrying again.",r),void ai();console.error("tec_custom_tables_v1_series_data ajax request failed:",r)},Ei=()=>{(()=>{const e=sn("core/editor").isSavingPost();return!(!ln.isSavingPost&&!e)&&(!ln.isSavingPost&&e?(ln.isSavingPost=e,!1):(!ln.isSavingPost||!e)&&(ln.isSavingPost=e,!0))})()&&(ci.getSeriesData(),ci.getSeriesData=null,ai())},Oi=()=>{(()=>{const e=ei("core/block-editor").getBlocks().filter(e=>"tribe/event-datetime"===e.name);return!!e.length&&(e[0].attributes.rules&&"[]"!==e[0].attributes.rules)})()&&(bi(),(()=>{const e=ti(ni.eventSeriesSelect).find(":selected");if(!e.length)return!1;if("-1"===e.val())return!1;return!e.data("editLink")})()&&(ci.getSeriesData=Zc(Ei)))},_i=()=>{ni.saveButton&&ni.saveButton.isConnected||(ni.saveButton=document.querySelector(an),ni.saveButton&&ni.saveButton.addEventListener("click",Oi,!0))},vi=()=>{ni.saveDraftButton&&ni.saveDraftButton.isConnected||(ni.saveDraftButton=document.querySelector(un),ni.saveDraftButton&&ni.saveDraftButton.addEventListener("click",Oi,!0))},gi=()=>{if(di(),!ni.eventSeriesSelect)return;ci.listenForEventSeriesSelect(),ci.listenForEventSeriesSelect=null;const e=ti(ni.eventSeriesSelect);e.on("change",{$target:e},pi)};(()=>{Zc(_i),Zc(vi),Zc(ui),ci.listenForEventSeriesSelect=Zc(gi)})()},O7uX:function(e,t,r){},OluY:function(e,t){e.exports=tribe["events-pro"].data.status.sagas},OuoG:function(e,t){e.exports=tribe["events-pro"].data.blocks.exception.types},PSCs:function(e,t){e.exports=tribe["events-pro"].data.blocks},Q9xL:function(e,t){e.exports=tribe.common.hoc},Rkpb:function(e,t){e.exports=tribe["events-pro"].data.blocks.exception},RmXt:function(e,t){e.exports=tribe.modules.reduxSaga.effects},SOG1:function(e,t){e.exports=tribe.events.data.blocks.datetime.selectors},UnPw:function(e,t){e.exports=tribe["events-pro"].data.blocks.exception.selectors},Yht6:function(e,t){e.exports=tribe.events.data.blocks.datetime.types},cDcd:function(e,t){e.exports=React},g8L8:function(e,t){e.exports=tribe.common.store},gGza:function(e,t){e.exports=tribe["events-pro"].data.blocks.recurring.constants},gSph:function(e,t){e.exports=tribe["events-pro"].data.blocks.constants},h74D:function(e,t){e.exports=tribe.modules.reactRedux},"iy/v":function(e,t){e.exports=tribe["events-pro"].data.blocks.recurring.selectors},kczL:function(e,t){e.exports=tribe.common.utils.globals},l3Sj:function(e,t){e.exports=wp.i18n},pVH8:function(e,t){e.exports=tribe["events-pro"].data.blocks.recurring.types},rKB8:function(e,t){e.exports=tribe.modules.redux},rf6O:function(e,t){e.exports=tribe.modules.propTypes},tPgE:function(e,t){e.exports=tribe["events-pro"].data.blocks.exception.actions},tbMi:function(e,t){e.exports=tribe.common.utils.date},wy2R:function(e,t){e.exports=moment},zCYh:function(e,t){e.exports=tribe.common.utils.moment}});