/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

tribe.events=tribe.events||{},tribe.events.virtualAdmin=tribe.events.virtualAdmin||{},function($,obj,tribe_dropdowns){var $document=$(document);obj.selectors={autoDetectButton:".tribe-events-virtual-video-source-autodetect__button",autoDetectFields:".tribe-events-virtual-video-source-autodetect__fields",autoDetectSource:"#tribe-events-virtual-autodetect-source",autoDetectMessagesWrap:".tribe-events-virtual-video-source-autodetect__messages-wrap",autoDetectMessage:".tec-events-virtual-settings-message__wrap",autoDetectloader:".tribe-common-c-loader",autoDetectPreviewWrap:".tec-autodetect-video-preview__container",autoDetectPreview:".tec-autodetect-video-preview__inner",autoDetecthiddenElement:".tribe-common-a11y-hidden",configure:".tribe-configure-virtual-button",displayOption:".tribe-events-virtual-display",displayOptionCheckbox:'.tribe-events-virtual-display input[type="checkbox"]',embedCheckbox:"#tribe-events-virtual-embed-video",remove:".tribe-remove-virtual-event",setupCheckbox:"#tribe-events-virtual-setup",showOptions:".tribe-events-virtual-show input",showAll:"#tribe-events-virtual-show-to-all",videoSource:"#tribe-events-virtual-video-source",videoSourcesWrap:".tribe-events-virtual-video-sources-wrap",videoSourceDetails:".tribe-events-virtual-video-sources",videoSourcesFloat:".tribe-events-virtual-video-sources--float",virtualContainer:"#tribe-virtual-events",virtualUrl:".tribe-events-virtual-video-source__virtual-url-input",embedNotice:".tribe-events-virtual-video-source__not-embeddable-notice",embedNoticeShow:".tribe-events-virtual-video-source__not-embeddable-notice--show",embedNoticeText:".tribe-events-virtual-video-source__not-embeddable-text"},obj.setCheckboxCheckedAttr=function(checked){return obj.isGutenbergActive()?function(){const blocks=wp.data.select("core/block-editor").getBlocks(),dateBlock=blocks.find((block=>"tribe/event-price"===block.name));if(checked){if(blocks.filter((block=>"tribe/virtual-event"===block.name)).length)return void $(obj.selectors.setupCheckbox).prop("checked",checked).trigger("verify.dependency");if(dateBlock){const index=wp.data.select("core/block-editor").getBlockIndex(dateBlock.clientId),newBlock=wp.blocks.createBlock("tribe/virtual-event");wp.data.dispatch("core/block-editor").insertBlock(newBlock,index+1,"",!1)}else{const newBlock=wp.blocks.createBlock("tribe/virtual-event");wp.data.dispatch("core/block-editor").insertBlock(newBlock)}$document.trigger("virtual.add");document.getElementById("tribe-virtual-events").scrollIntoView()}else{if(!confirm(tribe_events_virtual_strings.deleteConfirm))return;tribe.events.metaboxDelete=!0,blocks.forEach((element=>{"tribe/virtual-event"===element.name&&wp.data.dispatch("core/block-editor").removeBlock(element.clientId)})),$document.trigger("virtual.delete"),tribe.events.metaboxDelete=!1}$(obj.selectors.setupCheckbox).prop("checked",checked).trigger("verify.dependency")}:function(){if(checked)$document.trigger("virtual.add");else{if(!confirm(tribe_events_virtual_strings.deleteConfirm))return;$document.trigger("virtual.delete")}$(obj.selectors.setupCheckbox).prop("checked",checked).trigger("verify.dependency")}},obj.show=function($container){const $loader=$container.find(obj.selectors.autoDetectloader);$loader.length&&$loader.removeClass(obj.selectors.autoDetecthiddenElement.className())},obj.hide=function($container){const $loader=$container.find(obj.selectors.autoDetectloader);$loader.length&&$loader.addClass(obj.selectors.autoDetecthiddenElement.className())},obj.handleVideoPreviewOnLoad=function(){const $videoPreview=$(obj.selectors.autoDetectPreview);0!==$.trim($videoPreview.html()).length&&$(obj.selectors.autoDetectPreviewWrap).removeClass("hide-preview")},obj.handleAutoDetectVideoPreview=function(event,data){if(!data.html)return;const $videoPreview=$(data.html).filter(obj.selectors.autoDetectPreview);0!==$videoPreview.length&&($(obj.selectors.autoDetectPreviewWrap).removeClass("hide-preview"),$(obj.selectors.autoDetectPreview).replaceWith($videoPreview),$document.trigger("autodetect.videoPreview",{html:data.html}))},obj.onAutoDetectSuccess=function(html){obj.hide($(".tribe-events-virtual-video-source-autodetect__inner-controls")),$document.trigger("autodetect.complete",{html:html});const $message=$(html).filter(obj.selectors.autoDetectMessage),$autoDetectFields=$(html).filter(obj.selectors.autoDetectFields);if($(obj.selectors.autoDetectMessagesWrap).html($message),0===$autoDetectFields.length)return;$(obj.selectors.autoDetectFields).replaceWith($autoDetectFields);$(obj.selectors.autoDetectFields).find(tribe_dropdowns.selector.dropdown).not(tribe_dropdowns.selector.created).tribe_dropdowns(),$(obj.selectors.autoDetectSource).trigger("setup.dependency").trigger("verify.dependency")},obj.detectSource=function(){if("video"!==$(obj.selectors.videoSource).val())return;const $video_input=$(obj.selectors.virtualUrl),video_url=$video_input.val(),url=$video_input.data("autodetectAjaxUrl"),$autodetectFields=$("[name^='tribe-events-virtual-autodetect']"),ajaxData={};$autodetectFields.map((function(){let field=$(this).prop("name").match(/\[(.*?)\]/)[1];ajaxData[field]=this.value})).get(),obj.show($(".tribe-events-virtual-video-source-autodetect__inner-controls")),$(obj.selectors.autoDetectPreviewWrap).addClass("hide-preview"),$.ajax(url,{contentType:"application/json",context:$(obj.selectors.videoSourceDetails),data:{video_url:video_url,ajax_data:ajaxData},success:obj.onAutoDetectSuccess})},obj.handleShowOptionEnablement=function(){var checked=$(obj.selectors.displayOption).find(":checked:visible").length,$showOptions=$(obj.selectors.showOptions);checked>0?$showOptions.prop({disabled:!1}):$showOptions.prop({disabled:!0})},obj.handleShowOptionInteractivity=function(e){if(e&&Object.prototype.hasOwnProperty.call(e,"target")){var $this=$(e.target);$this.prop("checked")&&"all"!==$this.val()&&$(obj.selectors.showAll).prop("checked",!1)}},obj.bindEvents=function(){$(obj.selectors.virtualContainer).on("click",obj.selectors.configure,obj.setCheckboxCheckedAttr(!0)).on("click",obj.selectors.remove,obj.setCheckboxCheckedAttr(!1)).on("click",obj.selectors.autoDetectButton,obj.detectSource).on("click",obj.selectors.displayOptionCheckbox,obj.handleShowOptionEnablement).on("change",obj.selectors.showOptions,obj.handleShowOptionInteractivity),$document.on("autodetect.complete",obj.handleAutoDetectVideoPreview)},obj.isGutenbergActive=function(){return"undefined"!=typeof wp&&void 0!==wp.blocks&&void 0!==wp.data&&!!wp.data.select("core/blocks").getBlockType("tribe/virtual-event")},obj.ready=function(){obj.bindEvents(),setTimeout((function(){$(obj.selectors.videoSource).trigger("verify.dependency")}),0),obj.handleVideoPreviewOnLoad()},obj.testEmbed=function(){if(console.info("Method deprecated and replaced with Autodetect feature."),"video"!==$(obj.selectors.videoSource).val())return;const $input=$(obj.selectors.virtualUrl),url=$input.val(),nonce=$input.attr("data-nonce");$input.attr("data-oembed-test")&&url&&nonce?$.ajax({type:"post",dataType:"json",url:ajaxurl,data:{action:"tribe_events_virtual_check_oembed",url:url,nonce:nonce}}).done((function(){obj.hideOembedNotice()})).fail((function(response){obj.showOembedNotice(response)})):obj.hideOembedNotice()},obj.hideOembedNotice=function(){console.info("Method deprecated and replaced with Autodetect feature."),$(obj.selectors.embedNotice).removeClass(obj.selectors.embedNoticeShow.className()),$(obj.selectors.embedCheckbox).prop({disabled:!1})},obj.showOembedNotice=function(response){console.info("Method deprecated and replaced with Autodetect feature."),$(obj.selectors.embedNoticeText).html(response.responseJSON.data),$(obj.selectors.embedNotice).addClass(obj.selectors.embedNoticeShow.className()),$(obj.selectors.embedCheckbox).prop({disabled:!0,checked:!1})},$(obj.ready)}(jQuery,tribe.events.virtualAdmin,tribe_dropdowns);