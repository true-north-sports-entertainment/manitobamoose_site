/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

tribe.events=tribe.events||{},tribe.events.views=tribe.events.views||{},tribe.events.views.filterBar={},function($,_,obj){"use strict";var $document=$(document),$body=null;obj.selectors={tribeFiltersOpen:".tribe-filters-open",tribeFiltersClosed:".tribe-filters-closed",tribeAjaxSuccess:".tribe-ajax-success",filterBar:"#tribe_events_filters_wrapper",filterBarHorizontalClass:".tribe-events-filters-horizontal",filtersForm:"#tribe_events_filters_form",filterItem:".tribe_events_filter_item",filterGroupHeading:".tribe-events-filters-group-heading",filterGroup:".tribe-events-filter-group",filterSelect2:".tribe-events-filter-select2",filterItemClosedClass:".closed",filterItemActiveClass:".active",filterItemCategory:"#tribe_events_filter_item_eventcategory",filterStatus:".tribe-filter-status",uiSlider:".ui-slider",filtersToggle:".tribe-js-filters-toggle",filtersReset:".tribe-js-filters-reset",filterLive:".tribe-filter-live",visualHide:".tribe-common-a11y-visual-hide",searchForm:".tribe-events-c-events-bar__search-form",selectWoo:".select2-container--open.tribe-dropdown"},obj.state={shouldSubmit:!1,isLiveRefresh:!1,mobileInitialized:!1},obj.areFiltersHorizontal=function($filterBar){return $filterBar.hasClass(obj.selectors.filterBarHorizontalClass.className())},obj.areFiltersOpen=function(){return $body.hasClass(obj.selectors.tribeFiltersOpen.className())},obj.openFilters=function(){$body.removeClass(obj.selectors.tribeFiltersClosed.className()).removeClass(obj.selectors.tribeAjaxSuccess.className()).addClass(obj.selectors.tribeFiltersOpen.className())},obj.closeFilters=function(){$body.addClass(obj.selectors.tribeFiltersClosed.className()).removeClass(obj.selectors.tribeFiltersOpen.className())},obj.toggleFilters=function(){$body.is(obj.selectors.tribeFiltersClosed)?obj.openFilters():obj.closeFilters()},obj.clearFilters=function($filterBar){$filterBar.find("input, select").each((function(index,filter){var type=filter.type,tag=filter.tagName.toLowerCase();"text"===type||"password"===type||"textarea"===tag?this.value="":"checkbox"===type||"radio"===type?this.checked=!1:"select"===tag&&(this.selectedIndex=0)}))},obj.resetUiSlider=function($filterBar){$filterBar.find(obj.selectors.uiSlider).each((function(index,slider){var $slider=$(slider),$input=$slider.prev(),$display=$input.prev(),settings=$slider.slider("option");$slider.slider("values",0,settings.min),$slider.slider("values",1,settings.max),$display.text(settings.min+" - "+settings.max),$input.val("")}))},obj.resetFilters=function(event){$body.addClass("tribe-reset-on");var $filterBar=event.data.filterBar,$form=$filterBar.find(obj.selectors.filtersForm);obj.clearFilters($filterBar),obj.resetUiSlider($filterBar),obj.resetSelect2($filterBar),obj.resetActiveFilters($filterBar),obj.areFiltersHorizontal($filterBar)&&$filterBar.find(obj.selectors.filterItem).addClass(obj.selectors.filterItemClosedClass.className()),obj.state.shouldSubmit=!1,$form.submit(),$body.removeClass("tribe-reset-on")},obj.submitForm=function($form){var $container=$form.closest(tribe.events.views.manager.selectors.container),formData=Qs.parse($form.serialize());formData.form_submit=!0;var data={url:window.location.href,view_data:formData};tribe.events.views.manager.request(data,$container)},obj.debouncedSubmitForm=_.debounce((function($form){obj.state.shouldSubmit&&$form.submit()}),500),obj.handleSlideChange=function(event){if(obj.state.isLiveRefresh){var $form=event.data.target.closest(obj.selectors.filtersForm);obj.state.shouldSubmit=!0,obj.debouncedSubmitForm($form)}},obj.handleFilterChange=function(event){if(obj.state.isLiveRefresh){var $form=event.data.target.closest(obj.selectors.filtersForm);obj.state.shouldSubmit=!0,obj.debouncedSubmitForm($form)}},obj.resetSelect2=function($filterBar){$filterBar.find(obj.selectors.filterSelect2).each((function(index,filter){$(filter).find("input.tribe-dropdown").val(null).trigger("change")}))},obj.resetActiveFilters=function($filterBar){$filterBar.find(obj.selectors.filterItem+obj.selectors.filterItemActiveClass).each((function(index,filterItem){$(filterItem).removeClass(obj.selectors.filterItemActiveClass.className())})),$filterBar.find(obj.selectors.filterStatus).each((function(index,status){$(status).text("")}))},obj.openFilterGroup=function(event){event.data.target.removeClass(obj.selectors.filterItemClosedClass.className()).find(obj.selectors.filterGroupHeading).attr("aria-expanded","false")},obj.closeFilterGroup=function(event){event.data.target.addClass(obj.selectors.filterItemClosedClass.className()).find(obj.selectors.filterGroupHeading).attr("aria-expanded","true")},obj.closeAllFilterGroups=function(event){event.data.filterBar.find(obj.selectors.filterItem).each((function(index,filterItem){var eventObj={data:{target:$(filterItem)}};obj.closeFilterGroup(eventObj)}))},obj.toggleFilterGroup=function(event){event.stopPropagation();var $filterBar=event.data.filterBar,$filterItem=event.data.target.closest(obj.selectors.filterItem);obj.areFiltersHorizontal($filterBar)&&$filterBar.find(obj.selectors.filterItem).not($filterItem).each((function(index,filterItem){var eventObj={data:{target:$(filterItem)}};obj.closeFilterGroup(eventObj)}));var eventObj={data:{target:$filterItem}};$filterItem.hasClass(obj.selectors.filterItemClosedClass.className())?obj.openFilterGroup(eventObj):obj.closeFilterGroup(eventObj)},obj.handleDocumentClick=function(event){var $target=$(event.target);if(!($target.is(obj.selectors.filterGroup)||$target.closest(obj.selectors.filterGroup).length||$(obj.selectors.selectWoo).length)){var eventObj={data:{filterBar:event.data.filterBar}};obj.closeAllFilterGroups(eventObj)}},obj.handleResize=function(event){var $container=event.data.container,isMobile=$container.data("tribeEventsState").isMobile;if(!isMobile&&obj.state.mobileInitialized){obj.state.mobileInitialized=!1;var $filterBar=$container.find(obj.selectors.filterBar);obj.areFiltersOpen()||obj.areFiltersHorizontal($filterBar)||obj.openFilters()}else isMobile&&!obj.state.mobileInitialized&&(obj.state.mobileInitialized=!0,obj.closeFilters())},obj.handleBeforeOnSubmit=function(event,onSubmitEvent){var $container=$(event.target),$form=$(onSubmitEvent.target);$form.is(obj.selectors.searchForm)&&$container.find(obj.selectors.filterItem).each((function(filterItemIndex,filter){var $filter=$(filter);$filter.find("[name]").each((function(index,field){var adjustedName,$field=$(field),name=$field.attr("name");adjustedName="[]"===name.slice(-2)?"tribe-events-views["+name.slice(0,name.length-2)+"][]":"tribe-events-views["+name+"]",$field.attr("name",adjustedName)})),$filter.addClass(obj.selectors.visualHide.className()).appendTo($form)}))},obj.handleAfterOnSubmit=function(event,onSubmitEvent){var $container=$(event.target),$form=$(onSubmitEvent.target);if($form.is(obj.selectors.searchForm)){var $filtersForm=$container.find(obj.selectors.filtersForm);$.fn.reverse=Array.prototype.reverse,$form.find(obj.selectors.filterItem).reverse().each((function(filterItemIndex,filter){var $filter=$(filter);$filter.find("[name]").each((function(index,field){var adjustedName,$field=$(field),name=$field.attr("name");adjustedName="[]"===name.slice(-2)?name.slice(19,name.length-3)+"[]":name.slice(19,name.length-1),$field.attr("name",adjustedName)})),$filter.removeClass(obj.selectors.visualHide.className()).prependTo($filtersForm)})),delete $.fn.reverse}},obj.handleFormSubmit=function(event){event.preventDefault(),obj.submitForm(event.data.form)},obj.unbindEvents=function($container){var $filterBar=$container.find(obj.selectors.filterBar),$form=$filterBar.find(obj.selectors.filtersForm),$filterGroupHeading=$filterBar.find(obj.selectors.filterGroupHeading),$filtersToggle=$filterBar.find(obj.selectors.filtersToggle),$filtersReset=$filterBar.find(obj.selectors.filtersReset),$uiSlider=$filterBar.find(obj.selectors.uiSlider),$inputSelect=$filterBar.find("input, select");$document.off("click",obj.handleDocumentClick),$container.off("resize.tribeEvents",obj.handleResize).off("beforeOnSubmit.tribeEvents",obj.handleBeforeOnSubmit).off("afterOnSubmit.tribeEvents",obj.handleAfterOnSubmit),$filterGroupHeading.each((function(index,groupHeading){$(groupHeading).off("click",obj.toggleFilterGroup)})),$filtersToggle.off("click",obj.toggleFilters),$filtersReset.off("click",obj.resetFilters),$uiSlider.each((function(index,slider){$(slider).off("slidechange",obj.handleSlideChange)})),$inputSelect.each((function(index,filter){$(filter).off("change",obj.handleFilterChange)})),$form.off("submit",obj.handleFormSubmit)},obj.bindEvents=function($container){var $filterBar=$container.find(obj.selectors.filterBar),$form=$filterBar.find(obj.selectors.filtersForm),$filterGroupHeading=$filterBar.find(obj.selectors.filterGroupHeading),$filtersToggle=$filterBar.find(obj.selectors.filtersToggle),$filtersReset=$filterBar.find(obj.selectors.filtersReset),$uiSlider=$filterBar.find(obj.selectors.uiSlider),$inputSelect=$filterBar.find("input, select");$document.on("click",{filterBar:$filterBar},obj.handleDocumentClick),$container.on("resize.tribeEvents",{container:$container},obj.handleResize).on("beforeOnSubmit.tribeEvents",obj.handleBeforeOnSubmit).on("afterOnSubmit.tribeEvents",obj.handleAfterOnSubmit),$filterGroupHeading.each((function(index,groupHeading){var $groupHeading=$(groupHeading);$groupHeading.on("click",{target:$groupHeading,filterBar:$filterBar},obj.toggleFilterGroup)})),$filtersToggle.on("click",obj.toggleFilters),$filtersReset.on("click",{filterBar:$filterBar},obj.resetFilters),$uiSlider.each((function(index,slider){var $slider=$(slider);$slider.on("slidechange",{target:$slider},obj.handleSlideChange)})),$inputSelect.each((function(index,filter){var $filter=$(filter);$filter.on("change",{target:$filter},obj.handleFilterChange)})),$form.on("submit",{form:$form},obj.handleFormSubmit)},obj.initFilters=function($container){var $filterBar=$container.find(obj.selectors.filterBar),$dropdowns=$filterBar.find(tribe_dropdowns.selector.dropdown).not(tribe_dropdowns.selector.created),eventObj={data:{filterBar:$filterBar}};obj.closeAllFilterGroups(eventObj),obj.state.isLiveRefresh=$body.is(obj.selectors.filterLive),$dropdowns.tribe_dropdowns();var isMobile=$container.data("tribeEventsState").isMobile;isMobile||obj.areFiltersHorizontal($filterBar)||obj.openFilters(),obj.state.mobileInitialized=isMobile},obj.deinit=function(event,jqXHR,settings){var $container=event.data.container;obj.unbindEvents($container),$container.find(tribe_dropdowns.selector.dropdown).each((function(index,dropdown){var $dropdown=$(dropdown);$dropdown.is("input, select")&&$dropdown.data("select2").destroy()})),$container.off("beforeAjaxSuccess.tribeEvents",obj.deinit)},obj.init=function(event,index,$container,data){$container.find(obj.selectors.filterBar).length&&(obj.bindEvents($container),obj.initFilters($container),$container.on("beforeAjaxSuccess.tribeEvents",{container:$container},obj.deinit))},obj.ready=function(){$body=$("body"),$document.on("afterSetup.tribeEvents",tribe.events.views.manager.selectors.container,obj.init)},$(obj.ready)}(jQuery,_,tribe.events.views.filterBar);