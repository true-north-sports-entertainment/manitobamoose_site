/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

tribe.filterBar=tribe.filterBar||{},tribe.filterBar.filterMultiselects={},function($,_,obj){"use strict";var $document=$(document);obj.selectors={multiselectInput:'[data-js="tribe-filter-bar-c-multiselect-input"]'},obj.handleMultiselectChange=function(event){var key=event.data.target.attr("name");if(key&&!tribe.events.views.manager.currentAjaxRequest){var urlObject=tribe.filterBar.filters.getCurrentUrlAsObject(event.data.container),location=tribe.filterBar.filters.removeKeyValueFromQuery(urlObject,key,!0),value=event.data.target.attr("value");if(value){var uniqueValues=_.uniq(value.split(","));_.filter(uniqueValues,_.identity).forEach((function(filteredValue){location=tribe.filterBar.filters.addKeyValueToQuery(location,key,filteredValue)}))}tribe.filterBar.filters.submitRequest(event.data.container,location.href)}},obj.debouncedHandleMultiselectChange=_.debounce(obj.handleMultiselectChange,50),obj.handleTemplateSelection=function(state){var $newEl=$('<span class="select2-selection__choice__text"></span>');return $newEl.text(state.text),$newEl},obj.initMultiselect=function($multiselectInput,$container){tribe_dropdowns.dropdown($multiselectInput,{templateSelection:obj.handleTemplateSelection}),$multiselectInput.on("change",{target:$multiselectInput,container:$container},obj.debouncedHandleMultiselectChange).data("select2").$container.addClass("select2-container--open"),$multiselectInput.data("select2").trigger("query",{})},obj.deinitMultiselects=function($container){$container.find(obj.selectors.multiselectInput).each((function(index,multiselectInput){$(multiselectInput).off().select2("destroy")}))},obj.initMultiselects=function($container){$container.find(obj.selectors.multiselectInput).each((function(index,multiselectInput){obj.initMultiselect($(multiselectInput),$container)}))},obj.handleKeyDown=function(event){event.stopPropagation()},obj.handleFocusIn=function(event){$(event.target).on("keydown",obj.handleKeyDown)},obj.handleFocusOut=function(event){$(event.target).off("keydown",obj.handleKeyDown)},obj.deinit=function(event){var $container=event.data.container;obj.deinitMultiselects($container),$container.off("beforeAjaxSuccess.tribeEvents",obj.deinit)},obj.init=function(event,index,$container){obj.initMultiselects($container),$container.on("beforeAjaxSuccess.tribeEvents",{container:$container},obj.deinit),$container.find(".tribe-events-c-search__input").on("focusin",{container:$container},obj.handleFocusIn).on("focusout",{container:$container},obj.handleFocusOut)},obj.ready=function(){$document.on("afterSetup.tribeEvents",tribe.events.views.manager.selectors.container,obj.init)},$(obj.ready)}(jQuery,_,tribe.filterBar.filterMultiselects);